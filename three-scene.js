window.initThree = function() {if(typeof THREE==='undefined')return;const wrap=document.getElementById('canvas-wrap');if(!wrap)return;const w=wrap.clientWidth||innerWidth*.6,h=wrap.clientHeight||innerHeight;const scene=new THREE.Scene();const camera=new THREE.PerspectiveCamera(45,w/h,.1,100);camera.position.set(0,.2,4.2);const renderer=new THREE.WebGLRenderer({antialias:true,alpha:true});renderer.setSize(w,h);renderer.setPixelRatio(Math.min(devicePixelRatio,2));wrap.appendChild(renderer.domElement);scene.add(new THREE.HemisphereLight(0xffffff,0x9fc8e8,1.2));const dir=new THREE.DirectionalLight(0xffffff,.6);dir.position.set(2,3,4);scene.add(dir);const geo=new THREE.PlaneGeometry(4,2.2,80,40);const mat=new THREE.MeshStandardMaterial({color:0xffffff,roughness:.55,metalness:.05,transparent:true,opacity:.95});const plane=new THREE.Mesh(geo,mat);plane.rotation.x=-.3;plane.position.set(-.2,-.1,0);scene.add(plane);const bubbles=new THREE.Group();for(let i=0;i<36;i++){const b=new THREE.Mesh(new THREE.SphereGeometry(.03+Math.random()*.05,12,12),new THREE.MeshStandardMaterial({color:0x9fc8e8,transparent:true,opacity:.6}));b.position.set((Math.random()-.5)*3,-1+Math.random()*1.5,-.2+Math.random()*.6);b.scale.setScalar(.6+Math.random()*1.2);bubbles.add(b);}scene.add(bubbles);let tx=0,ty=0;addEventListener('pointermove',e=>{tx=(e.clientX/innerWidth-.5)*.4;ty=(e.clientY/innerHeight-.5)*.25},{passive:true});function anim(t){requestAnimationFrame(anim);const time=t*.001;for(let i=0;i<geo.attributes.position.count;i++){const ix=i*3;const x=geo.attributes.position.array[ix];const y=geo.attributes.position.array[ix+1];geo.attributes.position.array[ix+2]=Math.sin(x*2+time)*.03+Math.cos(y*2+time*1.2)*.02;}geo.attributes.position.needsUpdate=true;bubbles.children.forEach((p,i)=>{p.position.y+=.004+(i%5)*.0005;if(p.position.y>1)p.position.y=-1;});camera.position.x+=(tx-camera.position.x)*.06;camera.position.y+=(ty-camera.position.y)*.06;renderer.render(scene,camera);}anim(0);addEventListener('resize',()=>{const W=wrap.clientWidth||innerWidth*.6,H=wrap.clientHeight||innerHeight;renderer.setSize(W,H);camera.aspect=W/H;camera.updateProjectionMatrix();});}window.initThree && window.initThree();
